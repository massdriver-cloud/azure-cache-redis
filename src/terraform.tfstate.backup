{
  "version": 4,
  "terraform_version": "1.1.8",
  "serial": 6,
  "lineage": "41593392-194c-1b25-8bf7-e21f8795a3f9",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "azurerm_redis_cache",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "capacity": 1,
            "enable_non_ssl_port": false,
            "family": "P",
            "hostname": "local-dev-redis-0000.redis.cache.windows.net",
            "id": "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/Microsoft.Cache/Redis/local-dev-redis-0000",
            "location": "eastus",
            "minimum_tls_version": "1.2",
            "name": "local-dev-redis-0000",
            "patch_schedule": [],
            "port": 6379,
            "primary_access_key": "fKHr3xMoEmNIxZdS9itcutkagJ7ZlUS2rAzCaKNF95g=",
            "primary_connection_string": "local-dev-redis-0000.redis.cache.windows.net:6380,password=fKHr3xMoEmNIxZdS9itcutkagJ7ZlUS2rAzCaKNF95g=,ssl=true,abortConnect=False",
            "private_static_ip_address": "10.0.0.4",
            "public_network_access_enabled": true,
            "redis_configuration": [
              {
                "aof_backup_enabled": false,
                "aof_storage_connection_string_0": "",
                "aof_storage_connection_string_1": "",
                "enable_authentication": true,
                "maxclients": 7500,
                "maxfragmentationmemory_reserved": 642,
                "maxmemory_delta": 642,
                "maxmemory_policy": "",
                "maxmemory_reserved": 642,
                "notify_keyspace_events": "",
                "rdb_backup_enabled": false,
                "rdb_backup_frequency": 0,
                "rdb_backup_max_snapshot_count": 0,
                "rdb_storage_connection_string": ""
              }
            ],
            "redis_version": "6.0.14",
            "replicas_per_master": 1,
            "replicas_per_primary": 1,
            "resource_group_name": "local-dev",
            "secondary_access_key": "MEXgV7cWPvrlAyRvHDK3gQjpmFSw6vgzeAzCaFRFcpU=",
            "secondary_connection_string": "local-dev-redis-0000.redis.cache.windows.net:6380,password=MEXgV7cWPvrlAyRvHDK3gQjpmFSw6vgzeAzCaFRFcpU=,ssl=true,abortConnect=False",
            "shard_count": 0,
            "sku_name": "Premium",
            "ssl_port": 6380,
            "subnet_id": "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/Microsoft.Network/virtualNetworks/local-dev-vnet-0000/subnets/default",
            "tags": {
              "md-manifest": "redis",
              "md-package": "local-dev-redis-0000",
              "md-project": "local",
              "md-target": "dev"
            },
            "tenant_settings": null,
            "timeouts": null,
            "zones": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "module": "module.cpu_metric_alert",
      "mode": "managed",
      "type": "azurerm_monitor_metric_alert",
      "name": "metric_alert",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "action": [
              {
                "action_group_id": "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/microsoft.insights/actionGroups/local-dev-alarms",
                "webhook_properties": {
                  "md-manifest": "redis",
                  "md-package": "local-dev-redis-0000",
                  "md-project": "local",
                  "md-target": "dev"
                }
              }
            ],
            "application_insights_web_test_location_availability_criteria": [],
            "auto_mitigate": true,
            "criteria": [
              {
                "aggregation": "Average",
                "dimension": [
                  {
                    "name": "Primary",
                    "operator": "Include",
                    "values": [
                      "*"
                    ]
                  }
                ],
                "metric_name": "allpercentprocessortime",
                "metric_namespace": "Microsoft.Cache/Redis",
                "operator": "GreaterThan",
                "skip_metric_validation": false,
                "threshold": 90
              }
            ],
            "description": "High CPU Usage",
            "dynamic_criteria": [],
            "enabled": true,
            "frequency": "PT1M",
            "id": "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/Microsoft.Insights/metricAlerts/local-dev-redis-0000-highProcessorTime",
            "name": "local-dev-redis-0000-highProcessorTime",
            "resource_group_name": "local-dev",
            "scopes": [
              "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/Microsoft.Cache/Redis/local-dev-redis-0000"
            ],
            "severity": 1,
            "tags": {
              "md-manifest": "redis",
              "md-package": "local-dev-redis-0000",
              "md-project": "local",
              "md-target": "dev"
            },
            "target_resource_location": "",
            "target_resource_type": "",
            "timeouts": null,
            "window_size": "PT5M"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_redis_cache.main"
          ]
        }
      ]
    },
    {
      "module": "module.memory_metric_alert",
      "mode": "managed",
      "type": "azurerm_monitor_metric_alert",
      "name": "metric_alert",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "action": [
              {
                "action_group_id": "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/microsoft.insights/actionGroups/local-dev-alarms",
                "webhook_properties": {
                  "md-manifest": "redis",
                  "md-package": "local-dev-redis-0000",
                  "md-project": "local",
                  "md-target": "dev"
                }
              }
            ],
            "application_insights_web_test_location_availability_criteria": [],
            "auto_mitigate": true,
            "criteria": [
              {
                "aggregation": "Average",
                "dimension": [
                  {
                    "name": "Primary",
                    "operator": "Include",
                    "values": [
                      "*"
                    ]
                  }
                ],
                "metric_name": "allusedmemorypercentage",
                "metric_namespace": "Microsoft.Cache/Redis",
                "operator": "GreaterThan",
                "skip_metric_validation": false,
                "threshold": 90
              }
            ],
            "description": "High Memory Usage",
            "dynamic_criteria": [],
            "enabled": true,
            "frequency": "PT1M",
            "id": "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/Microsoft.Insights/metricAlerts/local-dev-redis-0000-highMemoryUsage",
            "name": "local-dev-redis-0000-highMemoryUsage",
            "resource_group_name": "local-dev",
            "scopes": [
              "/subscriptions/4718857a-5dbe-452c-a172-21a3ae74304f/resourceGroups/local-dev/providers/Microsoft.Cache/Redis/local-dev-redis-0000"
            ],
            "severity": 1,
            "tags": {
              "md-manifest": "redis",
              "md-package": "local-dev-redis-0000",
              "md-project": "local",
              "md-target": "dev"
            },
            "target_resource_location": "",
            "target_resource_type": "",
            "timeouts": null,
            "window_size": "PT5M"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "azurerm_redis_cache.main"
          ]
        }
      ]
    }
  ]
}
